name: Inspect bgwco container via Python pipe
on:
  push:
    branches: [ main ]
    paths: [ '.github/workflows/fix8.yml' ]
jobs:
  fix:
    runs-on: ubuntu-latest
    timeout-minutes: 6
    steps:
      - name: Install sshpass
        run: sudo apt-get install -y sshpass
      - name: Inspect via python3 pipe
        env:
          SP: JKj3nhnaij3P
        run: |
          sshpass -p "$SP" ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null root@49.12.236.136 "docker inspect bgwco0cgcsw4ws8w840cs0kg-135919028869 2>/dev/null | python3 -c \"import sys,json; d=json.load(sys.stdin); c=d[0]; print('Status:', c.get('State',{}).get('Status')); nets=list(c.get('NetworkSettings',{}).get('Networks',{}).keys()); print('Networks:', nets); labels=c.get('Config',{}).get('Labels',{}); [print('LABEL',k,'=',v) for k,v in labels.items() if 'traefik' in k.lower() or 'jspriggins' in v]\"  || echo NO_CONTAINER"
