name: Check bgwco container labels
on:
  push:
    branches: [ main ]
    paths: [ '.github/workflows/fix7.yml' ]
jobs:
  fix:
    runs-on: ubuntu-latest
    timeout-minutes: 6
    steps:
      - name: Install sshpass
        run: sudo apt-get install -y sshpass
      - name: Find punky-site container and show its labels
        env:
          SP: JKj3nhnaij3P
        run: |
          sshpass -p "$SP" ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null root@49.12.236.136 "docker ps --format NAME={{.Names}} | grep bgwco && echo --- && for C in $(docker ps -q --filter name=bgwco); do echo CONTAINER $C; docker inspect $C --format '{{range $k,$v := .Config.Labels}}LABEL {{$k}}={{$v}}\n{{end}}' | grep -E 'traefik|jspriggins|network'; echo NETWORKS; docker inspect $C --format '{{range $k,$v := .NetworkSettings.Networks}}NET {{$k}}\n{{end}}'; done"
